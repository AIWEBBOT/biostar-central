{% extends "site_layout.html" %}
{% load widgets %}

{% block title %}
    Group List
{% endblock %}

{% block body %}

    <div class="row">
        {% user_bar user %}
    </div>
    <div class="row">
        <div class="nine columns">


            <div class="row">

                <div class="title">
                    Current group: <b>{{ group.name }}</b>
                    {% if group.owner == user %}
                        | <a href="{% url "group_edit" pk=group.id %}">edit</a>
                        | <a href="{% url "group_manage" pk=group.id %}">manage</a>
                    {% endif %}
                </div>

                <div>
                    <p>
                        Groups are subsections of the site dedicated to a particular topic. Post made in group are
                        visible only when accessing that group. Only members of a group may post to that group.
                    </p>

                    <p>
                        Groups may be public (visible to everyone) others may be private (visible to subscribed users
                        only).To gain membership to a private group the moderators of that group will need to add
                        members to their group.
                    </p>

                    <p>
                        Users with sufficient reputation points may
                        <a href="{% url "group_create" %}">create a new group</a>.
                    </p>

                    <p>
                        Note that only a limited number of groups may be created by each user.
                        Site admins may also create groups both public and private (contact us if you
                        need assistance).
                    </p>
                </div>

                {% page_bar page %}

                <table class="u-full-width" id="group_list">
                    <tr>
                        <th>Group Name</th>
                        <th>Description</th>
                    </tr>
                    {% for group in public %}
                        <tr>
                            <td>
                                <div>
                                    <h5>
                                        <a href="{% url "group_redirect" pk=group.id %}">{{ group.name }}</a>
                                    </h5>
                                </div>
                                <div>
                                    Domain: <code>{{ group.domain }}</code>
                                </div>
                                <div>
                                    Owner: <a href="{{ group.owner.get_absolute_url }}">{{ group.owner.name }} </a>

                                </div>

                                <div>
                                    Current subscription: {{ group.subscription }} | <a
                                href="{% url "group_subscribe" pk=group.id %}">Change subscription</a>
                                </div>


                            </td>

                            <td>{{ group.description }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>

            {% page_bar page %}

        </div>

        <div class="three columns recent_votes">
            {% message_bar %}

            <div class="title">
                Current Roles
            </div>

            {% for perm in perms %}
                <div style="padding-bottom:1ex;">
                    <a href="{{ perm.user.get_absolute_url }}">
                        {{ perm.user.name }}</a> &bull;  {{ perm.user.score|bignum }}
                    <div>{{ perm.get_role_display }}</div>
                </div>
            {% endfor %}
        </div>

    </div>



{% endblock %}
